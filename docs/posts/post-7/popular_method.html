<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Bharath G.S">
<meta name="dcterms.date" content="2022-10-14">

<title>writings - Popular methods applied to LTR Setting</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<style>
    .quarto-title-block .quarto-title-banner {
      background: rgb(242, 239, 231);
    }
    </style>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-sm navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">writings</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://iambharathgs.in/"><i class="bi bi-person-badge-fill" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/bharathgs"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/iambharathgs"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/iambharathgs/"><i class="bi bi-linkedin" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Popular methods applied to LTR Setting</h1>
            <p class="subtitle lead">The Foundation: A Notes on LTR</p>
                                <div class="quarto-categories">
                <div class="quarto-category">ltr</div>
                <div class="quarto-category">recsys</div>
                <div class="quarto-category">optimisation</div>
                <div class="quarto-category">applied-ml</div>
                <div class="quarto-category">marketplace</div>
                <div class="quarto-category">economics</div>
                <div class="quarto-category">notes</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Bharath G.S </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 14, 2022</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>Over the years, numerous approaches have been applied in LTR settings. Broadly most of these approaches can be classified into four categories as follows:</p>
<ol type="1">
<li>Label Aggregation</li>
<li>Constraint Optimization</li>
<li>Model Fusion/Aggregation</li>
<li>Lexicographic</li>
</ol>
<p>Now, lets us define these approaches.</p>
<section id="label-aggregation" class="level2">
<h2 class="anchored" data-anchor-id="label-aggregation">Label Aggregation</h2>
<p>In this method, we combine all objective functions to form a single objective function which is then minimized. Once we convert the multi-objective into a single objective by combing the labels, we solved the given LTR problem as the single objective function. Let’s say for given query q, and products P, we have two different labels, <span class="math inline">\(ℓ_1(q,p)\)</span> a similarity score between query and prodct, and <span class="math inline">\(ℓ_2(p)\)</span> a profit margin for a product, we can put a new label as <span class="math inline">\(ℓ(q, p) = \alpha·ℓ_1(q, p) + (1 − \alpha)·ℓ2(p)\)</span></p>
<p>Note: Here <span class="math inline">\(\alpha\)</span> is manually chosen by the user. If <span class="math inline">\(\alpha \in \{0,1\}\)</span>, the problem is reduced to a single objective optimization.</p>
<p>In general, given k objectives rank function looks like below:</p>
<p>Minimise, <span class="math display">\[f(x) = \sum_{i=1}^k{\alpha_i * f_i(x)}\]</span></p>
<p>Subject to <span class="math display">\[\sum_{i=1}^k{\alpha_i = 1}\]</span></p>
<section id="advantages" class="level4">
<h4 class="anchored" data-anchor-id="advantages">Advantages</h4>
<ol type="1">
<li>It gives a clear interpretation of the multi-objective function and generalize it.</li>
<li>It allows multiple parameters to be set to reflect preferences.</li>
</ol>
</section>
<section id="disadvantages" class="level4">
<h4 class="anchored" data-anchor-id="disadvantages">Disadvantages</h4>
<ol type="1">
<li>It tries to optimize for each objective function, which can be computationally expensive.</li>
<li>The setting of parameters <span class="math inline">\((\alpha_i)\)</span> is not intuitively clear when only one solution point is desired.</li>
</ol>
</section>
</section>
<section id="constraint-optimization" class="level2">
<h2 class="anchored" data-anchor-id="constraint-optimization">Constraint Optimization</h2>
<p>This method optimizes the single most important objective <span class="math inline">\(f_{primary}(x)\)</span> and treat the other objectives as constraints with pre-determined upperbound. As we saw eariler, let’s say have two objectives to optimize. First objective is <span class="math inline">\(ℓ_1(q,p)\)</span> - similarity score between <span class="math inline">\((p,q)\)</span> and second <span class="math inline">\(ℓ_2(p)\)</span> - profit margin for <span class="math inline">\(o\)</span>. Then we could consider <span class="math inline">\(ℓ_1(q,p)\)</span> as primary objective and <span class="math inline">\(ℓ_2(p)\)</span> as secondary objective. In this method we will optimize for primary objective <span class="math inline">\(ℓ_1(q,p)\)</span> subject to <span class="math inline">\(ℓ_2(p) \lesssim \epsilon\)</span>.</p>
<p>In general, given k objectives the ranking function is as follows:</p>
<p><span class="math display">\[ \min_{\forall x_i} f_l(x)\]</span> Subject to <span class="math display">\[ f_i(x) \lesssim \epsilon_i, \forall i \not =  l ,\]</span> <span class="math inline">\(\epsilon_i\)</span> is upperbound for <span class="math inline">\(f_i(x)\)</span>. And, <span class="math inline">\(f_l(x)\)</span> is the primary function to optimize.</p>
<section id="advantages-1" class="level4">
<h4 class="anchored" data-anchor-id="advantages-1">Advantages</h4>
<ol type="1">
<li>It focuses on a single objective with limits on others.</li>
<li>It always provides a weakly Pareto optimal point, assuming that the formulation gives a solution.</li>
<li>It is not necessary to normalize the objective functions.</li>
</ol>
</section>
<section id="disadvantages-1" class="level4">
<h4 class="anchored" data-anchor-id="disadvantages-1">Disadvantages</h4>
<ol type="1">
<li>The optimization problem may be infeasible if the bounds on the objective functions are not appropriate.</li>
</ol>
</section>
</section>
<section id="model-fusionaggregation" class="level2">
<h2 class="anchored" data-anchor-id="model-fusionaggregation">Model Fusion/Aggregation</h2>
<p>This method is an aggregation of multiple independent ranking models. The final ranking socre is obtained by a convex combination of multiple models. As we saw earlier if we have two objectives, let’s say <span class="math inline">\(ℓ_1(q,p)\)</span> - similarity between query and product and <span class="math inline">\(ℓ_2(p)\)</span> - profit margin. Then first we train the <span class="math inline">\(M_{l1}\)</span> model which optimizes for similarity score between (q,p). And further we also independently train another model <span class="math inline">\(M_{l2}\)</span> which optimizes for the profit margin. The linear combination of the models can be formulated as <span class="math inline">\(M(q,p) = \alpha·M_{l1}(q, p) + (1 − α)·M_{l2}(p)\)</span>, where the hyperparameter <span class="math inline">\(\alpha \in[0, .,., 1]\)</span> controls the tradeoff between the two model scores.</p>
<p>In general, given k objectives the ranking function looks as follows:</p>
<p><span class="math display">\[M(x) = \sum_{i=1}^k (\alpha_i * M_i (x))\]</span></p>
<p>where, <span class="math inline">\(M_i(x)\)</span> is an independently trained model for optimizing <span class="math inline">\(i^{th}\)</span> objective.</p>
<section id="advantages-2" class="level4">
<h4 class="anchored" data-anchor-id="advantages-2">Advantages</h4>
<ol start="2" type="1">
<li>This is used as a post-rank method, and as such easy to tweak weighting parameters.</li>
<li>Learning for one single objective will not be affected by other objectives (decoupled objectives).</li>
</ol>
</section>
<section id="disadvantages-2" class="level4">
<h4 class="anchored" data-anchor-id="disadvantages-2">Disadvantages</h4>
<ol type="1">
<li>It’s difficult to find the optimal weight for the final ranking.</li>
</ol>
</section>
</section>
<section id="lexicographic" class="level2">
<h2 class="anchored" data-anchor-id="lexicographic">Lexicographic</h2>
<p>When we have more than one objective, we rank the items by ordering the objective functions according to their importance. As mentioned earlier, we have two objective functions, <span class="math inline">\(ℓ_1(q,p)\)</span> similarity between query and product as pprimary objective and <span class="math inline">\(ℓ_2(p)\)</span> profit margin as the secondary objective. Then We will order the items according to the primary objective <span class="math inline">\(ℓ_1(q,p)\)</span> and if a tie happens, then we use <span class="math inline">\(ℓ_2(p)\)</span> the secondary objective score to break the tie.</p>
<p>In general, given k objectives, the rank function looks like below:</p>
<p>Minimise, <span class="math display">\[ f_i(x)\]</span></p>
<p>Subject to <span class="math display">\[ f_j(x) \lesssim f_j(x_j^*)\]</span> <span class="math inline">\(j = 1\)</span> to (<span class="math inline">\(i - 1\)</span>) and <span class="math inline">\(i &gt; 1\)</span> ; <span class="math inline">\(i = 1\)</span> to <span class="math inline">\(k\)</span></p>
<p>Here, we rank the function based on <span class="math inline">\(f_i\)</span>, and where a tie occurs we break the tie based on <span class="math inline">\(f_{(i+1)}\)</span> score.</p>
<section id="advantages-3" class="level4">
<h4 class="anchored" data-anchor-id="advantages-3">Advantages</h4>
<ol type="1">
<li>It is a unique approach to specifying preferences.</li>
<li>It does not require that the objective functions be normalized.</li>
</ol>
</section>
<section id="disadvantages-3" class="level4">
<h4 class="anchored" data-anchor-id="disadvantages-3">Disadvantages</h4>
<ol type="1">
<li>It requires that additional constraints be imposed.</li>
<li>It is computation heavy if we have more objectives.</li>
</ol>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>